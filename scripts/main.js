"use strict";function swipeProject(e){animationOnGoing||projectOpened||(animationOnGoing=!0,$(projects).css("z-index","-1"),"right"==e?($(projects[currentProject]).animate({left:"-=50%"},2e3,function(){leftProject=currentProject,currentProject=rightProject,rightProject=calcNext(currentProject),swipeEnded()}),$(projects[rightProject]).css("z-index","0").animate({left:"-=100%"},2e3)):($(projects[currentProject]).animate({left:"+=50%"},2e3,function(){rightProject=currentProject,currentProject=leftProject,leftProject=calcPrevious(currentProject),swipeEnded()}),$(projects[leftProject]).css("z-index","0").animate({left:"+=100%"},2e3)))}function swipeEnded(){$(".project-title").show(),$(".project-title").hide(),$(projects[currentProject]).find(".project-title").fadeIn(),$(projects[rightProject]).css("left","+100%"),$(projects[leftProject]).css("left","-100%"),animationOnGoing=!1}function openProject(e){projectOpened||animationOnGoing||(projectOpened=!0,animationOnGoing=!0,$(".project-hero").hide(),$(projects[currentProject]).find(".project-title").addClass("active"),$(projects[currentProject]).show().addClass("opened").animate({width:"-=12%",height:"-=120px","margin-top":"+96px","margin-left":"+=6%"},1200,function(){$(this).find(".project-title").addClass("position-top"),$("html, body").css("overflow","visible"),$(".top-link").css("color","#333"),$(".top-link.left").fadeIn(),$("section.project."+e).fadeIn(),animationOnGoing=!1}))}function closeProject(){projectOpened&&!animationOnGoing&&(animationOnGoing=!0,$("section.project").fadeOut(),$(projects[currentProject]).find(".project-title").fadeOut(),$(projects[currentProject]).delay(400).animate({width:"100%",height:"100%",margin:"0"},1200,function(){$(this).removeClass("opened").find(".project-title").removeClass("active position-top").fadeIn(),$(".top-link").css("color","white"),$(".top-link.left").fadeOut(),resetContainersSize(),$(".project-hero").show(),animationOnGoing=!1,projectOpened=!1,window.history.replaceState("home","Sara Colombo","/")}),$("html, body").css("overflow","hidden"))}function resetContainersSize(){$(".project-title").css("top","45%"),$(projects).css({width:"100vw",height:"100vh","margin-top":"0","margin-left":"0"}),$(projects[currentProject]).css("left","0"),$(projects[leftProject]).css("left","-100%"),$(projects[rightProject]).css("left","+100%")}function manageUrlParams(){var e=getUrlParam("p");if(e){var t=!1;$(projects).each(function(i,n){var r=$(n).find("h1.project-title").attr("data-open");r==e&&(t=!0,currentProject=i,leftProject=calcPrevious(currentProject),rightProject=calcNext(currentProject),$(projects[currentProject]).css("left","0"),$(projects[rightProject]).css("left","+100%"),$(projects[leftProject]).css("left","-100%"),$(projects).show(),openProject(r))}),t||$(projects).show()}else $(projects).show()}function callback(){intervalTime=7e3,swipeProject("right"),interval=setTimeout(callback,intervalTime)}function smoothScrolling(e){var t=$(window),i=e.originalEvent.wheelDelta/120||-e.originalEvent.detail/3,n=t.scrollTop()-parseInt(300*i);TweenMax.to(t,1.2,{scrollTo:{y:n,autoKill:!0},ease:Expo.easeOut,autoKill:!0,overwrite:5})}function getUrlParam(e,t){var i=t||window.location.href,n=new RegExp("[?&]"+e+"=([^&#]*)","i"),r=n.exec(i);return r?r[1]:null}function calcNext(e){return e==projects.length-1?0:e+1}function calcPrevious(e){return 0==e?projects.length-1:e-1}function slider(e){this.leftImage=0,this.currentImage=1,this.rightImage=2,this.container=e}function swipe(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!animationOnGoing){i||(animationOnGoing=!0);var n=void 0,r=void 0;"left"==t?(n=e.rightImage,r="-50%"):(n=e.leftImage,r="+50%");var o=e.container.find(".image");$(o).eq(e.currentImage).css("z-index","0").animate({left:r},1200),$(o).eq(n).css("z-index","1").animate({left:"0"},1200,function(){e.currentImage=n,e.rightImage=calcNext(n,o),e.leftImage=calcPrevious(n,o),o.eq(e.leftImage).css("left","-100%"),o.eq(e.rightImage).css("left","100%"),animationOnGoing=!1})}}function calcNext(e,t){return e==t.length-1?0:e+1}function calcPrevious(e,t){return 0==e?t.length-1:e-1}function loadSperdutaScenes(){$(".sperduta .row").each(function(e){new ScrollMagic.Scene({triggerElement:".sperduta .section-"+(e+1),duration:1500}).setTween(TweenMax.to(".sperduta .section-"+(e+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(controller)}),new ScrollMagic.Scene({triggerElement:".sperduta .section-2",duration:1500}).setTween(TweenMax.to(".sperduta .section-3 .box",1,{css:{top:"+=40px"},ease:Linear.easeNone})).addTo(controller),new ScrollMagic.Scene({triggerElement:".sperduta .section-5",duration:800}).setTween(TweenMax.to(".sperduta .section-6 .box",1,{css:{bottom:"+=48px"},ease:Linear.easeNone})).addTo(controller)}function loadRootsScenes(){$(".roots .row").each(function(e){new ScrollMagic.Scene({triggerElement:".roots .section-"+(e+1),duration:1500}).setTween(TweenMax.to(".roots .section-"+(e+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(controller)}),new ScrollMagic.Scene({triggerElement:".roots .section-1",duration:1200}).setTween(TweenMax.to(".roots .section-2 .box",1,{css:{bottom:"+=220px"},ease:Linear.easeNone})).addTo(controller)}function loadFirefightersScenes(){$(".firefighters .row").each(function(e){new ScrollMagic.Scene({triggerElement:".firefighters .section-"+(e+1),duration:1500}).setTween(TweenMax.to(".firefighters .section-"+(e+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(controller)})}function loadBlackScenes(){$(".black .row").each(function(e){new ScrollMagic.Scene({triggerElement:".black .section-"+(e+1),duration:1500}).setTween(TweenMax.to(".black .section-"+(e+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(controller)})}function loadUppercutScenes(){$(".uppercut .row").each(function(e){new ScrollMagic.Scene({triggerElement:".uppercut .section-"+(e+1),duration:1500}).setTween(TweenMax.to(".uppercut .section-"+(e+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(controller)}),new ScrollMagic.Scene({triggerElement:".uppercut .section-4",duration:1500}).setTween(TweenMax.to(".uppercut .section-5 .box",1,{css:{top:"+=48px"},ease:Linear.easeNone})).addTo(controller),new ScrollMagic.Scene({triggerElement:".uppercut .section-6",duration:1500}).setTween(TweenMax.to(".uppercut .section-7 .box",1,{css:{top:"+=48px"},ease:Linear.easeNone})).addTo(controller)}var projects=$(".project-hero"),currentProject=1,rightProject=2,leftProject=0,animationOnGoing=!1,projectOpened=!1,touchStart=void 0,interval=void 0,intervalTime=5e3;window.onload=function(){manageUrlParams(),interval=setTimeout(callback,intervalTime),$(projects[currentProject]).find(".project-title").fadeIn()},$(window).on("touchstart",function(e){touchStart=e.originalEvent.touches[0].clientX}),$(window).on("touchend",function(e){var t=e.originalEvent.changedTouches[0].clientX;touchStart>t+5?swipeProject("right"):touchStart<t-5&&swipeProject("left"),clearTimeout(interval)}),$(window).on("wheel",function(e){e.preventDefault(),smoothScrolling(e);var t=e.originalEvent.deltaY,i=e.originalEvent.deltaX;clearTimeout(interval),swipeProject(t>0||i>0?"right":"left")}),$(".project-title").click(function(){var e=$(this).attr("data-open");window.history.replaceState("page"+e,e,"?p="+e),openProject(getUrlParam("p"))}),$(".project-title").hover(function(){projectOpened||$(projects).animate({width:"-=20px",height:"-=20px","margin-left":"+=10px","margin-top":"+=10px"},400)},function(){projectOpened||$(projects).animate({width:"100%",height:"100%","margin-left":"0px","margin-top":"0px"},400)}),$(".top-link.left").click(function(){closeProject()});var sliderOne=new slider($(".sperduta .section-2 .slider")),sliderTwo=new slider($(".sperduta .section-3 .slider")),sliderThree=new slider($(".firefighters .section-3 .slider")),sliderFourLeft=new slider($(".firefighters .section-6 .slider.left")),sliderFourRight=new slider($(".firefighters .section-6 .slider.right")),sliderFive=new slider($(".firefighters .section-10 .slider")),sliderSix=new slider($(".firefighters .section-12 .slider")),sliderSeven=new slider($(".uppercut .section-8 .slider")),sliderEightLeft=new slider($(".black .section-2 .slider.left")),sliderEightRight=new slider($(".black .section-2 .slider.right")),sliderNine=new slider($(".black .section-5 .slider")),sliderTen=new slider($(".black .section-8 .slider")),sliderEleven=new slider($(".black .section-9 .slider")),animationOnGoing=!1;$(".sperduta .section-2 .slider-nav").click(function(){$(this).hasClass("right")?swipe(sliderOne,"left"):swipe(sliderOne,"right")}),$(".sperduta .section-3 .slider-nav").click(function(){$(this).hasClass("right")?swipe(sliderTwo,"left"):swipe(sliderTwo,"right")}),$(".firefighters .section-3 .slider-nav").click(function(){$(this).hasClass("right")?swipe(sliderThree,"left"):swipe(sliderThree,"right")}),$(".firefighters .section-6 .slider-nav").click(function(){$(this).hasClass("right")?(swipe(sliderFourLeft,"left",!0),swipe(sliderFourRight,"left",!0),animationOnGoing=!0):(swipe(sliderFourLeft,"right",!0),swipe(sliderFourRight,"right",!0),animationOnGoing=!0)}),$(".firefighters .section-10 .slider-nav").click(function(){$(this).hasClass("right")?swipe(sliderFive,"left"):swipe(sliderFive,"right")}),$(".firefighters .section-12 .slider-nav").click(function(){$(this).hasClass("right")?swipe(sliderSix,"left"):swipe(sliderSix,"right")}),$(".uppercut .section-8 .slider-nav").click(function(){$(this).hasClass("right")?swipe(sliderSeven,"left"):swipe(sliderSeven,"right")}),$(".black .section-2 .slider-nav").click(function(){$(this).hasClass("right")?(swipe(sliderEightLeft,"left",!0),swipe(sliderEightRight,"left",!0),animationOnGoing=!0):(swipe(sliderEightLeft,"right",!0),swipe(sliderEightRight,"right",!0),animationOnGoing=!0)}),$(".black .section-5 .slider-nav").click(function(){$(this).hasClass("right")?swipe(sliderNine,"left"):swipe(sliderNine,"right")}),$(".black .section-8 .slider-nav").click(function(){$(this).hasClass("right")?swipe(sliderTen,"left"):swipe(sliderTen,"right")}),$(".black .section-9 .slider-nav").click(function(){$(this).hasClass("right")?swipe(sliderEleven,"left"):swipe(sliderEleven,"right")}),$(".slider").hover(function(){$(this).children(".slider-nav.left").fadeIn().addClass("animated slideInRight"),$(this).children(".slider-nav.right").fadeIn().addClass("animated slideInLeft")},function(){$(this).children(".slider-nav").fadeOut()});var controller=new ScrollMagic.Controller;loadSperdutaScenes(),loadRootsScenes(),loadFirefightersScenes(),loadBlackScenes(),loadUppercutScenes();