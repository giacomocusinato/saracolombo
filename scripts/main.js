"use strict";$(function(){function e(){M?t():d()}function t(){$(".site-loader").hide(),$(".site-content").show(),s(),r(),S=setTimeout(l,I),$(w[m]).find(".project-title").show().fadeIn()}function i(){$(".bio").css("z-index","3").animate({bottom:"0"},2e3,function(){h(),$(".bio-inner").addClass("opened")}),$(".site-content").css("z-index","0").animate({top:"50vh"},2e3,function(){$(this).css("top","100vh").hide(),k?$(".top-link").fadeOut():$(".top-link.right, .project-title").fadeOut()})}function n(e){b||k||T||(b=!0,$(w).css("z-index","0"),"right"==e?($(w[m]).animate({left:"-=50%"},2e3,function(){x=m,m=v,v=g(m),o()}),$(w[v]).css("z-index","1").animate({left:"-=100%"},2e3)):($(w[m]).animate({left:"+=50%"},2e3,function(){v=m,m=x,x=p(m),o()}),$(w[x]).css("z-index","1").animate({left:"+=100%"},2e3)))}function o(){$(".project-title").hide(),$(w[m]).find(".project-title").fadeIn(),$(".view-project").hide(),$(w[m]).find(".view-project").fadeIn(),$(w[v]).css("left","+100%"),$(w[x]).css("left","-100%"),b=!1}function a(e){k||b||(k=!0,b=!0,$(".project-hero").hide(),$(w[m]).find(".project-title").addClass("active"),$(".view-project").fadeOut(),$(w[m]).show().addClass("opened").animate({width:"88%",height:"-=120px","margin-top":"96px","margin-left":"6%"},1200,function(){$("html, body").css("overflow","visible"),$(".top-link").css("color","#333"),$(".top-link.left").fadeIn(),$(".scroll-down").fadeIn(),$(this).find(".project-title").addClass("position-top"),$("section.project."+e).fadeIn(),b=!1}))}function c(){k&&!b&&(b=!0,$("section.project").fadeOut(),$(".scroll-down").fadeOut(),$(w[m]).find(".project-title").fadeOut(),$(w[m]).delay(400).animate({width:"100%",height:"100%",margin:"0"},1200,function(){$(this).removeClass("opened").find(".project-title").removeClass("active position-top").fadeIn(),$(this).find(".view-project").fadeIn(),$(".top-link").css("color","white"),$(".top-link.left").fadeOut(),s(),$(".project-hero").show(),b=!1,k=!1,window.history.replaceState("home","Sara Colombo","/")}),$("html, body").css("overflow","hidden"))}function s(){$(w).css({width:"100vw",height:"100vh","margin-top":"0","margin-left":"0"}),$(w[m]).css("left","0"),$(w[x]).css("left","-100%"),$(w[v]).css("left","+100%")}function r(){var e=u("p");if(e){var t=!1;$(w).each(function(i,n){var o=$(n).find("h1.project-title").attr("data-open");o==e&&(t=!0,m=i,x=p(m),v=g(m),$(w[m]).css("left","0"),$(w[v]).css("left","+100%"),$(w[x]).css("left","-100%"),$(w).show(),a(o))}),t||($(w).show(),$(w[m]).find(".view-project").show().fadeIn())}else $(w).show(),$(w[m]).find(".view-project").show().fadeIn()}function l(){I=7e3,n("right"),S=setTimeout(l,I)}function f(e){var t=$(window),i=e.originalEvent.wheelDelta/120||-e.originalEvent.detail/3,n=t.scrollTop()-parseInt(300*i);TweenMax.to(t,1.2,{scrollTo:{y:n,autoKill:!0},ease:Expo.easeOut,autoKill:!0,overwrite:5})}function d(){$(".site-loader .line").stop().animate({width:"100vw"},800,function(){$(this).css("right",0).css("left","auto").animate({width:0},800,function(){$(".site-loader").animate({left:"-=50%"},2e3),$(".site-content").animate({left:"-=100%"},2e3,function(){t()})})})}function h(){$(".bio-text").get(0).scrollHeight>$(window).height()?$(".bio-text .author").css({position:"relative",bottom:"auto",width:"auto"}):$(".bio-text .author").css({position:"absolute",bottom:0,width:"calc(100% - 48px)"})}function u(e,t){var i=t||window.location.href,n=new RegExp("[?&]"+e+"=([^&#]*)","i"),o=n.exec(i);return o?o[1]:null}function g(e){return e==w.length-1?0:e+1}function p(e){return 0==e?w.length-1:e-1}var w=$(".project-hero"),m=1,v=2,x=0,b=!1,k=!1,T=!1,j=void 0,S=void 0,I=7e3;!function(e){var t=void 0,i=void 0,n=0,o=["./images/firefighters_main.jpg","./images/black_main.jpg","./images/uppercut_main.jpg","./images/sperduta_main.jpg","./images/roots_main.jpg"];for(t=0,i=o.length;t<i;t++)!function(t,i){t.onload=function(){++n>=o.length&&e&&e()},t.onerror=function(){n++},t.onabort=function(){n++},t.src=i}(new Image,o[t])}(e);var M=function(){var e=!1,t=u("p");return $(w).each(function(i,n){$(n).find("h1.project-title").attr("data-open")==t&&(e=!0)}),e}();M||($(".site-content").css("left","100%").show(),$(".site-loader").show(),$(".site-loader .line").animate({width:"100vw"},1e4)),$(window).on("touchstart",function(e){j=e.originalEvent.touches[0].clientX}),$(window).on("touchmove",function(e){T||k||e.preventDefault()}),$(window).on("touchend",function(e){var t=e.originalEvent.changedTouches[0].clientX;j>t+5?n("right"):j<t-5&&n("left"),clearTimeout(S)}),$(window).on("wheel",function(e){if(!T){e.preventDefault(),f(e);var t=e.originalEvent.deltaY,i=e.originalEvent.deltaX;clearTimeout(S),n(t>0||i>0?"right":"left")}}),$(".project-title, .view-project").click(function(){var e=$(this).attr("data-open");window.history.replaceState("page"+e,e,"?p="+e),a(u("p"))}),$(".next-project .title").click(function(){var e=$(this).attr("data-open");$("html, body").animate({scrollTop:0},800,function(){window.history.replaceState("page"+e,e,"?p="+e),window.location.reload()})}),$(".view-project").hover(function(){k||$(w).animate({width:"-=20px",height:"-=20px","margin-left":"+=10px","margin-top":"+=10px"},400).find(".project-title").css("opacity","0.9")},function(){k||$(w).animate({width:"100%",height:"100%","margin-left":"0px","margin-top":"0px"},400).find(".project-title").css("opacity","0.7")}),$(".top-link.left").click(function(){$("html, body").animate({scrollTop:0},800,function(){c()})}),$(".top-link.right").click(function(){T=!0,i()}),$(".bio-close").click(function(){$(".bio").css("z-index","-1").animate({bottom:"50vh"},2e3,function(){$(this).css("bottom","100vh"),$(".bio-inner").removeClass("opened"),T=!1}),$(".site-content").show().css("z-index","2").animate({top:"0"},2e3,function(){k?$(".top-link").fadeIn():$(".top-link.right, .project-title").fadeIn()})}),$(window).scroll(function(){$(window).scrollTop()+$(window).height()>$(document).height()-100&&$(".next-project .title").addClass("animated pulse")}),$(".next-project .title").hover(function(){$(".next-project-container").animate({width:"-=20px",height:"-=20px","margin-left":"+=10px","margin-top":"+=10px"},400)},function(){$(".next-project-container").animate({width:"100vw",height:"30vw",margin:"220px -12vw 0 -12vw"},400)}),$(window).on("resize",function(){h(),setTimeout(function(){h()},2e3)})}),$(function(){function e(e){this.leftImage=0,this.currentImage=1,this.rightImage=2,this.container=e}function t(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!m){o||(m=!0);var a=void 0,c=void 0;"left"==t?(a=e.rightImage,c="-50%"):(a=e.leftImage,c="+50%");var s=e.container.find(".image");$(s).eq(e.currentImage).css("z-index","0").animate({left:c},1200),$(s).eq(a).css("z-index","1").animate({left:"0"},1200,function(){e.currentImage=a,e.rightImage=i(a,s),e.leftImage=n(a,s),s.eq(e.leftImage).css("left","-100%"),s.eq(e.rightImage).css("left","100%"),m=!1})}}function i(e,t){return e==t.length-1?0:e+1}function n(e,t){return 0==e?t.length-1:e-1}var o=new e($(".sperduta .section-2 .slider")),a=new e($(".sperduta .section-3 .slider")),c=new e($(".firefighters .section-4 .slider")),s=new e($(".firefighters .section-7 .slider.left")),r=new e($(".firefighters .section-7 .slider.right")),l=new e($(".firefighters .section-11 .slider")),f=new e($(".firefighters .section-13 .slider")),d=new e($(".uppercut .section-8 .slider")),h=new e($(".black .section-2 .slider.left")),u=new e($(".black .section-2 .slider.right")),g=new e($(".black .section-5 .slider")),p=new e($(".black .section-8 .slider")),w=new e($(".black .section-9 .slider")),m=!1;$(".sperduta .section-2 .slider-nav").click(function(){$(this).hasClass("right")?t(o,"left"):t(o,"right")}),$(".sperduta .section-3 .slider-nav").click(function(){$(this).hasClass("right")?t(a,"left"):t(a,"right")}),$(".firefighters .section-4 .slider-nav").click(function(){$(this).hasClass("right")?t(c,"left"):t(c,"right")}),$(".firefighters .section-7 .slider-nav").click(function(){$(this).hasClass("right")?(t(s,"left",!0),t(r,"left",!0),m=!0):(t(s,"right",!0),t(r,"right",!0),m=!0)}),$(".firefighters .section-11 .slider-nav").click(function(){$(this).hasClass("right")?t(l,"left"):t(l,"right")}),$(".firefighters .section-13 .slider-nav").click(function(){$(this).hasClass("right")?t(f,"left"):t(f,"right")}),$(".uppercut .section-8 .slider-nav").click(function(){$(this).hasClass("right")?t(d,"left"):t(d,"right")}),$(".black .section-2 .slider-nav").click(function(){$(this).hasClass("right")?(t(h,"left",!0),t(u,"left",!0),m=!0):(t(h,"right",!0),t(u,"right",!0),m=!0)}),$(".black .section-5 .slider-nav").click(function(){$(this).hasClass("right")?t(g,"left"):t(g,"right")}),$(".black .section-8 .slider-nav").click(function(){$(this).hasClass("right")?t(p,"left"):t(p,"right")}),$(".black .section-9 .slider-nav").click(function(){$(this).hasClass("right")?t(w,"left"):t(w,"right")})}),$(function(){var e=new ScrollMagic.Controller;!function(){$(".sperduta .row").each(function(t){new ScrollMagic.Scene({triggerElement:".sperduta .section-"+(t+1),duration:1500}).setTween(TweenMax.to(".sperduta .section-"+(t+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(e)}),new ScrollMagic.Scene({triggerElement:".sperduta .section-2",duration:1500}).setTween(TweenMax.to(".sperduta .section-3 .box",1,{css:{top:"+=40px"},ease:Linear.easeNone})).addTo(e),new ScrollMagic.Scene({triggerElement:".sperduta .section-5",duration:800}).setTween(TweenMax.to(".sperduta .section-6 .box",1,{css:{bottom:"+=48px"},ease:Linear.easeNone})).addTo(e)}(),function(){$(".roots .row").each(function(t){new ScrollMagic.Scene({triggerElement:".roots .section-"+(t+1),duration:1500}).setTween(TweenMax.to(".roots .section-"+(t+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(e)}),new ScrollMagic.Scene({triggerElement:".roots .section-1",duration:1200}).setTween(TweenMax.to(".roots .section-2 .box",1,{css:{bottom:"+=220px"},ease:Linear.easeNone})).addTo(e)}(),function(){$(".firefighters .row").each(function(t){new ScrollMagic.Scene({triggerElement:".firefighters .section-"+(t+1),duration:1500}).setTween(TweenMax.to(".firefighters .section-"+(t+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(e)})}(),function(){$(".black .row").each(function(t){new ScrollMagic.Scene({triggerElement:".black .section-"+(t+1),duration:1500}).setTween(TweenMax.to(".black .section-"+(t+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(e)})}(),function(){$(".uppercut .row").each(function(t){new ScrollMagic.Scene({triggerElement:".uppercut .section-"+(t+1),duration:1500}).setTween(TweenMax.to(".uppercut .section-"+(t+2)+" .image",1,{backgroundPosition:"50% 100%",ease:Linear.easeNone})).addTo(e)}),new ScrollMagic.Scene({triggerElement:".uppercut .section-4",duration:1500}).setTween(TweenMax.to(".uppercut .section-5 .box",1,{css:{top:"+=48px"},ease:Linear.easeNone})).addTo(e),new ScrollMagic.Scene({triggerElement:".uppercut .section-6",duration:1500}).setTween(TweenMax.to(".uppercut .section-7 .box",1,{css:{top:"+=48px"},ease:Linear.easeNone})).addTo(e)}(),new ScrollMagic.Scene({offset:100}).addTo(e).on("start",function(){$(".scroll-down").fadeOut()})});